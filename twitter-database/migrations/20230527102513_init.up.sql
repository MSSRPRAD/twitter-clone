CREATE TABLE IF NOT EXISTS ROLES (
    ROLE_ID INT PRIMARY KEY AUTO_INCREMENT
);

CREATE TABLE IF NOT EXISTS PROFILES (
    PROFILE_ID INT PRIMARY KEY AUTO_INCREMENT,
    PHONE_NO CHAR(10) UNIQUE,
    LOCATION VARCHAR(20),
    LANGUAGES VARCHAR(200)
);

CREATE TABLE IF NOT EXISTS USERS (
    USER_ID INT PRIMARY KEY AUTO_INCREMENT,
    ROLE_ID INT NOT NULL,
    FOREIGN KEY (ROLE_ID) REFERENCES ROLES(ROLE_ID),
    USERNAME VARCHAR(20) UNIQUE NOT NULL,
    PASSWORD VARCHAR(30) NOT NULL,
    EMAIL VARCHAR(255) UNIQUE NOT NULL, 
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    DOB CHAR(10) NOT NULL,
    PROFILE_ID INT UNIQUE,
    FOREIGN KEY (PROFILE_ID) REFERENCES PROFILES(PROFILE_ID)
);

/* 
ADMIN = 0
USER = 1
MODERATOR = 2
 */
INSERT INTO ROLES VALUES(0);
INSERT INTO ROLES VALUES(1);
INSERT INTO ROLES VALUES(2);

/* TEST DATA GENERATED BY CHATGPT */
-- Insert an admin test user
INSERT INTO USERS (ROLE_ID, USERNAME, PASSWORD, EMAIL, DOB) 
VALUES (0, 'admin', 'adminpassword', 'admin@example.com', '1990-01-01');

-- Insert a moderator test account
INSERT INTO USERS (ROLE_ID, USERNAME, PASSWORD, EMAIL, DOB) 
VALUES (2, 'moderator', 'moderatorpassword', 'moderator@example.com', '1995-01-01');

-- Insert a user test account
INSERT INTO USERS (ROLE_ID, USERNAME, PASSWORD, EMAIL, DOB) 
VALUES (1, 'user', 'userpassword', 'user@example.com', '1995-01-01');